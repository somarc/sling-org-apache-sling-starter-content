<!DOCTYPE html>
<html lang="en">
<!--
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License.
-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>AEM Author Client - Blockchain AEM Stack</title>
        <meta name="Description" content="AEM Author Client connected to Blockchain AEM Global Store with Oak Chain consensus">
        <meta name="theme-color" content="#667eea">
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
                padding: 40px 20px;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
            }

            .header {
                background: rgba(255, 255, 255, 0.98);
                border-radius: 16px;
                padding: 50px;
                margin-bottom: 40px;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                text-align: center;
            }

            h1 {
                font-size: 3.5rem;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                margin-bottom: 15px;
                line-height: 1.2;
            }

            .tagline {
                font-size: 1.3rem;
                color: #666;
                margin-bottom: 10px;
            }

            .subtitle {
                font-size: 1rem;
                color: #888;
                font-style: italic;
            }

            .card-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                gap: 30px;
                margin-bottom: 40px;
            }

            .card {
                background: rgba(255, 255, 255, 0.98);
                border-radius: 12px;
                padding: 35px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
                transition: transform 0.3s, box-shadow 0.3s;
                border-left: 5px solid #667eea;
            }

            .card:hover {
                transform: translateY(-5px);
                box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            }

            .card h2 {
                font-size: 1.8rem;
                color: #333;
                margin-bottom: 15px;
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .card-icon {
                font-size: 2rem;
            }

            .card p {
                color: #666;
                line-height: 1.6;
                margin-bottom: 20px;
                font-size: 1.05rem;
            }

            .card-links {
                display: flex;
                flex-direction: column;
                gap: 12px;
            }

            .btn {
                display: inline-block;
                padding: 14px 24px;
                border-radius: 8px;
                text-decoration: none;
                font-weight: 600;
                transition: all 0.3s;
                text-align: center;
                font-size: 1rem;
            }

            .btn-primary {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            }

            .btn-primary:hover {
                box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
                transform: translateY(-2px);
            }

            .btn-secondary {
                background: linear-gradient(135deg, #f6851b 0%, #e2761b 100%);
                color: white;
                box-shadow: 0 4px 15px rgba(246, 133, 27, 0.4);
            }

            .btn-secondary:hover {
                box-shadow: 0 6px 20px rgba(246, 133, 27, 0.6);
                transform: translateY(-2px);
            }

            .btn-tertiary {
                background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
                color: white;
                box-shadow: 0 4px 15px rgba(72, 187, 120, 0.4);
            }

            .btn-tertiary:hover {
                box-shadow: 0 6px 20px rgba(72, 187, 120, 0.6);
                transform: translateY(-2px);
            }

            .system-card {
                grid-column: 1 / -1;
                border-left-color: #48bb78;
            }

            .system-links {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 15px;
            }

            .footer {
                background: rgba(255, 255, 255, 0.95);
                border-radius: 12px;
                padding: 30px;
                text-align: center;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
                color: #666;
            }

            .footer a {
                color: #667eea;
                text-decoration: none;
                font-weight: 600;
            }

            .footer a:hover {
                text-decoration: underline;
            }

            .login-section {
                background: rgba(255, 255, 255, 0.95);
                border-radius: 12px;
                padding: 30px;
                margin-bottom: 30px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            }

            .login-section h2 {
                color: #2d3748;
                margin-bottom: 20px;
                font-size: 24px;
            }

            .login-form {
                display: grid;
                gap: 15px;
                max-width: 400px;
            }

            .form-group {
                display: flex;
                flex-direction: column;
                gap: 5px;
            }

            .form-group label {
                color: #4a5568;
                font-weight: 600;
                font-size: 14px;
            }

            .form-group input {
                padding: 12px;
                border: 2px solid #e2e8f0;
                border-radius: 8px;
                font-size: 16px;
                transition: border-color 0.3s;
            }

            .form-group input:focus {
                outline: none;
                border-color: #667eea;
            }

            .login-btn {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 12px 24px;
                border: none;
                border-radius: 8px;
                font-size: 16px;
                font-weight: 600;
                cursor: pointer;
                transition: transform 0.2s;
            }

            .login-btn:hover {
                transform: translateY(-2px);
            }

            .login-info {
                background: #f7fafc;
                padding: 15px;
                border-radius: 8px;
                border-left: 4px solid #667eea;
                color: #4a5568;
                font-size: 14px;
            }

            .user-info {
                display: flex;
                align-items: center;
                gap: 10px;
                color: #2d3748;
                font-weight: 600;
            }

            .badge {
                display: inline-block;
                padding: 6px 12px;
                border-radius: 20px;
                font-size: 0.85rem;
                font-weight: 600;
                margin-left: 10px;
            }

            .badge-poc {
                background: #fed7d7;
                color: #c53030;
            }

            .badge-new {
                background: #c6f6d5;
                color: #22543d;
            }

            @media (max-width: 768px) {
                h1 {
                    font-size: 2.5rem;
                }
                
                .header {
                    padding: 30px;
                }

                .card-grid {
                    grid-template-columns: 1fr;
                }

                .system-links {
                    grid-template-columns: 1fr;
                }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="header">
                <h1>‚õìÔ∏è AEM Author Client</h1>
                <p class="tagline">Connected to Blockchain AEM Global Store</p>
                <p class="subtitle">Multi-peer AEM Architecture ‚Ä¢ Oak Chain Consensus ‚Ä¢ Ethereum Smart Contracts</p>
                <span class="badge badge-poc">GARAGE WEEK 2025</span>
            </div>

            <!-- Login Section -->
            <div class="login-section" id="loginSection">
                <h2>üîê Authentication Required</h2>
                <form class="login-form" method="POST" action="${request.contextPath}/j_security_check" enctype="multipart/form-data" accept-charset="UTF-8">
                    <input type="hidden" name="_charset_" value="UTF-8" />
                    <input type="hidden" name="resource" value="${request.requestURI}" />
                    
                    <div class="login-info">
                        ‚ÑπÔ∏è Default credentials: <strong>admin</strong> / <strong>admin</strong>
                    </div>

                    <div class="form-group">
                        <label for="j_username">Username</label>
                        <input id="j_username" name="j_username" type="text" placeholder="admin" required autofocus />
                    </div>

                    <div class="form-group">
                        <label for="j_password">Password</label>
                        <input id="j_password" name="j_password" type="password" placeholder="admin" required />
                    </div>

                    <button type="submit" class="login-btn">
                        üöÄ Login to AEM Client
                    </button>
                </form>
            </div>

            <div class="card-grid">
                <!-- MetaMask Publishing -->
                <div class="card">
                    <h2>
                        <span class="card-icon">ü¶ä</span>
                        MetaMask Publishing
                        <span class="badge badge-new">NEW</span>
                    </h2>
                    <p>
                        Pay validators with cryptocurrency (ETH/USDC) via MetaMask. 
                        Choose Standard ($3.25), Express ($6.50), or Priority ($32.50) tiers 
                        for instant decentralized content publishing.
                    </p>
                    <div class="card-links">
                        <a href="../content/blockchain-aem/oak-chain-publish.html" class="btn btn-secondary">
                            üí∞ Pay & Publish to Oak Chain
                        </a>
                    </div>
                </div>

                <!-- Blockchain Browser -->
                <div class="card">
                    <h2>
                        <span class="card-icon">üîç</span>
                        Blockchain Browser
                    </h2>
                    <p>
                        Explore the global oak-chain content via HTTP Segment Transfer. 
                        View genesis content, validator status, and decentralized content 
                        replicated across multiple validators.
                    </p>
                    <div class="card-links">
                        <a href="../content/blockchain-aem/blockchain.html" class="btn btn-primary">
                            üåê Browse Global Chain
                        </a>
                        <a href="../bin/browser.html" class="btn btn-tertiary">
                            üóÇÔ∏è Composum Browser
                        </a>
                    </div>
                </div>

                <!-- Agentic Chat -->
                <div class="card">
                    <h2>
                        <span class="card-icon">ü§ñ</span>
                        Agentic Chat
                    </h2>
                    <p>
                        Chat with AI assistants that understand Oak validators, consensus 
                        mechanics, and blockchain economics. Get real-time insights into 
                        validator state and proposal queues.
                    </p>
                    <div class="card-links">
                        <a href="../content/blockchain-aem/agentic-chat.html" class="btn btn-primary">
                            üí¨ Chat with Oak Validators
                        </a>
                    </div>
                </div>

                <!-- System Administration -->
                <div class="card system-card">
                    <h2>
                        <span class="card-icon">‚öôÔ∏è</span>
                        System Administration
                    </h2>
                    <p>
                        Access Sling system tools, OSGi console, JCR browser, and configuration 
                        management. Admin credentials: <code style="background: #f7fafc; padding: 4px 8px; border-radius: 4px;">admin/admin</code>
                    </p>
                    <div class="system-links">
                        <a href="../system/console" class="btn btn-tertiary">
                            üéõÔ∏è OSGi Console
                        </a>
                        <a href="../bin/browser.html" class="btn btn-tertiary">
                            üìÇ JCR Browser
                        </a>
                        <a href="../system/console/configMgr" class="btn btn-tertiary">
                            üîß Configuration
                        </a>
                        <a href="../system/console/bundles" class="btn btn-tertiary">
                            üì¶ Bundles
                        </a>
                    </div>
                </div>
            </div>

            <div class="footer">
                <p>
                    <strong>Blockchain AEM Author Client</strong> - Built on Apache Sling + Jackrabbit Oak 1.89-SNAPSHOT
                </p>
                <p style="margin-top: 10px;">
                    <a href="https://github.com/apache/jackrabbit-oak" target="_blank">Oak Repository</a> ‚Ä¢ 
                    <a href="https://sling.apache.org" target="_blank">Apache Sling</a> ‚Ä¢ 
                    <a href="../content/blockchain-aem/blockchain.html">POC Documentation</a>
                </p>
                <p style="margin-top: 15px; font-size: 0.9rem; color: #999;">
                    ‚ö° Powered by Aeron Consensus ‚Ä¢ HTTP Segment Transfer ‚Ä¢ Ethereum Smart Contracts
                </p>
            </div>
        </div>

        <script src="../system/sling.js" type="application/javascript"></script>
        <script type="application/javascript">
            // Check authentication status and update UI
            Sling.getSessionInfoAsync( function(info) {
                const loginSection = document.getElementById('loginSection');
                const userID = info ? info.userID : null;
                
                console.log('Logged in as:', userID || 'anonymous');
                
                if (userID && userID !== 'anonymous') {
                    // User is authenticated - hide login form and show user info
                    loginSection.innerHTML = `
                        <div class="user-info">
                            <span style="font-size: 24px;">üë§</span>
                            <div>
                                <strong>Logged in as: ${userID}</strong>
                                <p style="margin: 5px 0 0; font-size: 14px; font-weight: normal; color: #718096;">
                                    You have full access to all AEM client features
                                </p>
                            </div>
                        </div>
                    `;
                    loginSection.style.background = 'rgba(72, 187, 120, 0.1)';
                    loginSection.style.borderLeft = '4px solid #48bb78';
                }
                // If not authenticated, login form is already visible
            });
        </script>
        <!-- Do not remove this comment, used for Starter integration tests -->
    </body>
</html>
